function browseForAvatar(){$("#file_browser").click(function(e){e.preventDefault(),$("#inputAvatar").click()})}function listenToPermissionsCheckboxEvents(){console.log("attaching event handling"),$("input").on("change",function(e){console.log("input was changed!"),e.preventDefault()})}function savePermission(e,n,t){var a={roleId_:n,permissionId_:t,scope_:e};$.ajax("/administration/updaterolepermission",{data:a})}function edit_state(e,n,t){t.preventDefault(),$("#cancel_"+n).removeClass("hidden"),$("button#"+n).addClass("hidden"),"save_profile_btn"===n&&($("#file_browser").addClass("btn-primary"),$("#file_browser").removeClass("btn-default")),$("#"+e).prop("disabled")&&($("#"+e).removeAttr("disabled"),$("#"+n).prop("disabled",!0))}function cancel_edit_state(e,n,t,a,o){o.preventDefault(),$("#"+n).prop("disabled",!0),$("#"+t).prop("disabled",!1),$("button#"+t).text(a),$("#cancel_"+t).addClass("hidden"),$("button#"+t).removeClass("hidden"),$("#file_browser").removeClass("btn-primary"),$("#"+t).removeClass("btn-success").addClass("btn-primary"),$("#"+e)[0].reset()}function input_changed(e){$("#"+e).prop("disabled",!1),$("#"+e).removeClass("btn-primary").addClass("btn-success"),$("button#"+e).text("Save"),$("#cancel_"+e).removeClass("hidden"),$("button#"+e).removeClass("hidden")}function checkClick(){var e=$(event.target)[0].id.split("_"),n=e[0]+"_"+e[1],t="NEVER";if(event.target.checked){switch(e[2]){case"ADMIN":$("#"+n+"_WRITE, #"+n+"_READ").prop("checked",!0).prop("disabled",!0);break;case"WRITE":$("#"+n+"_READ").prop("checked",!0).prop("disabled",!0)}savePermission(e[0],e[1],e[2])}else{switch(e[2]){case"ADMIN":$("#"+n+"_WRITE").prop("disabled",!1),t="WRITE";break;case"WRITE":$("#"+n+"_READ").prop("disabled",!1),t="READ"}savePermission(e[0],e[1],t)}}function removeRoleLink(){console.log("Role name: ",$(event.target).parent().data("roleId"));var e=$(event.target).parent().data().roleId.split("_");console.log("Extension name: ",e[0]," Role name: ",e[1]),$("#moduleName").text(e[0]),$("#roleName").text(e[1]),$("#myModal").modal("show")}function input_form_group_validator(e){console.log(e),$(e).is("input")&&($(e).val()?$(e).closest(".form-group").removeClass("has-error").removeClass("has-feedback"):$(e).closest(".form-group").addClass("has-error").addClass("has-feedback"))}$(function(){window.toastr.options.positionClass="toast-top-right",browseForAvatar(),$("#save_profile_btn").click(function(e){edit_state("profile_form_fieldset","save_profile_btn",e)}),$("#cancel_save_profile_btn").click(function(e){cancel_edit_state("profile_form","profile_form_fieldset","save_profile_btn","Edit",e)}),$("#profile_form :input").bind("keyup change paste",function(){input_changed("save_profile_btn")}),$("#change_pwd-btn").click(function(e){edit_state("pwd_form_fliedset","change_pwd-btn",e)}),$("#cancel_change_pwd-btn").click(function(e){cancel_edit_state("pwd_form","pwd_form_fliedset","change_pwd-btn","Change",e)}),$("#pwd_form :input").bind("keyup change paste",function(){input_changed("change_pwd-btn")}),$("#inputAvatar").change(function(){$("#file_path").val($(this).val())}),$("#add-role").click(function(){$("#edit-role-area").addClass("hidden"),$("#add-role-area").hasClass("hidden")?$("#add-role-area").removeClass("hidden"):$("#add-role-area").addClass("hidden")}),$("#edit-role").click(function(){$("#add-role-area").addClass("hidden"),$("#edit-role-area").hasClass("hidden")?$("#edit-role-area").removeClass("hidden"):$("#edit-role-area").addClass("hidden")}),$("#save-role-btn").click(function(){return console.log($("#role_name_input").val()),$("#role_name_input").val()?void window.toastr.success("role saved."):(window.toastr.warning("No role given.","Role not saved!"),void input_form_group_validator("#role_name_input"))}),$("#role_name_input").focusout(function(){input_form_group_validator("#role_name_input")}),$("#role_name_input").change(function(){input_form_group_validator("#role_name_input")}),$("#collapse").on("click",function(){$(".extension-row").each(function(){$(this).hasClass("collapsed")?($(this).removeClass("collapsed"),$(this).data("aria-expended","true"),$(".row.collapse").each(function(){$(this).toggleClass("in")})):($(this).toggleClass("collapsed"),$(this).data("aria-expended","false"),$(".row.collapse").each(function(){$(this).removeClass("in")}))})}),$("#btnRight").click(function(e){var n=$("#availableExtensions option:selected");0===n.length&&(window.toastr.warning("You must select at least one extension from the list of available extensions.","No extension selected"),e.preventDefault()),$("#selectedExtensions").append($(n).clone()),$(n).remove(),e.preventDefault()}),$("#btnAllRight").click(function(e){var n=$("#availableExtensions option");0===n.length&&(window.toastr.warning("No extensions are available.","No extensions"),e.preventDefault()),$("#selectedExtensions").append($(n).clone()),$(n).remove(),e.preventDefault()}),$("#btnLeft").click(function(e){var n=$("#selectedExtensions option:selected");0===n.length&&(window.toastr.warning("You must select at least one extension from the list of selected extensions.","No extension selected"),e.preventDefault()),$("#availableExtensions").append($(n).clone()),$(n).remove(),e.preventDefault()}),$("#btnAllLeft").click(function(e){var n=$("#selectedExtensions option");0===n.length&&(window.toastr.warning("Selected extensions list is empty.","No extensions"),e.preventDefault()),$("#availableExtensions").append($(n).clone()),$(n).remove(),e.preventDefault()})});