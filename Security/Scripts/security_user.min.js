function browseForAvatar(){$("#file_browser").click(function(n){n.preventDefault();$("#inputAvatar").click()})}function listenToPermissionsCheckboxEvents(){console.log("attaching event handling");$("input").on("change",function(n){console.log("input was changed!");n.preventDefault()})}function edit_state(n,t,i){i.preventDefault();$("#cancel_"+t).removeClass("hidden");$("button#"+t).addClass("hidden");t==="save_profile_btn"&&($("#file_browser").addClass("btn-primary"),$("#file_browser").removeClass("btn-default"));$("#"+n).prop("disabled")&&($("#"+n).removeAttr("disabled"),$("#"+t).prop("disabled",!0))}function cancel_edit_state(n,t,i,r,u){u.preventDefault();$("#"+t).prop("disabled",!0);$("#"+i).prop("disabled",!1);$("button#"+i).text(r);$("#cancel_"+i).addClass("hidden");$("button#"+i).removeClass("hidden");$("#file_browser").removeClass("btn-primary");$("#"+i).removeClass("btn-success").addClass("btn-primary");$("#"+n)[0].reset()}function input_changed(n){$("#"+n).prop("disabled",!1);$("#"+n).removeClass("btn-primary").addClass("btn-success");$("button#"+n).text("Save");$("#cancel_"+n).removeClass("hidden");$("button#"+n).removeClass("hidden")}function removeRoleLink(){console.log("Role name: ",$(event.target).parent().data("roleId"));var n=$(event.target).parent().data().roleId.split("_");console.log("Extension name: ",n[0]," Role name: ",n[1]);$("#moduleName").text(n[0]);$("#roleName").text(n[1]);$("#myModal").modal("show")}function input_form_group_validator(n){$(n).is("input")&&($(n).val()?$(n).closest(".form-group").removeClass("has-error").removeClass("has-feedback"):$(n).closest(".form-group").addClass("has-error").addClass("has-feedback"))}function input_form_group_set_error(n,t){if($(n).is("input")){var i=$(n).closest(".form-group");t?(i.addClass("has-error").addClass("has-feedback"),i.find("span.help-block").html(t)):(i.removeClass("has-error").removeClass("has-feedback"),i.find("span.help-block").html(""))}}function passSelectedRoleOnEdition(n){$("#edit-role-group").removeClass("has-error");$.ajax("/administration/findrole",{data:{roleId_:n}}).done(function(n){for(key in n.value)$("#"+key).val(n.value[key])})}function checkClick(){var n=$(event.target)[0].id.split("_"),t=n[0]+"_"+n[1],i="NEVER";if(event.target.checked){switch(n[2]){case"ADMIN":$("#"+t+"_WRITE, #"+t+"_READ").prop("checked",!0).prop("disabled",!0);break;case"WRITE":$("#"+t+"_READ").prop("checked",!0).prop("disabled",!0)}savePermission(n[0],n[1],n[2])}else{switch(n[2]){case"ADMIN":$("#"+t+"_WRITE").prop("disabled",!1);i="WRITE";break;case"WRITE":$("#"+t+"_READ").prop("disabled",!1);i="READ"}savePermission(n[0],n[1],i)}}function savePermission(n,t,i){var r={roleName_:t,permissionId_:i,scope_:n};$.ajax("/administration/updaterolepermission",{data:r})}function saveEditRole(n){var t=$("#"+n),i=t.serialize();$.ajax("/administration/updaterolename",{method:"POST",data:i,headers:{RequestVerificationToken:$('input:hidden[name="__RequestVerificationToken"]',t).val()}}).done(function(n){window.toastr.success(n,"Saved");console.log(n)}).fail(function(n,t){window.toastr.error(t,"ERROR)");console.log(n,t)})}$(function(){window.toastr.options.positionClass="toast-top-right";browseForAvatar();$("#save_profile_btn").click(function(n){edit_state("profile_form_fieldset","save_profile_btn",n)});$("#cancel_save_profile_btn").click(function(n){cancel_edit_state("profile_form","profile_form_fieldset","save_profile_btn","Edit",n)});$("#change_pwd-btn").click(function(n){edit_state("pwd_form_fliedset","change_pwd-btn",n)});$("#cancel_change_pwd-btn").click(function(n){cancel_edit_state("pwd_form","pwd_form_fliedset","change_pwd-btn","Change",n)});$("#add-role").click(function(){$("#edit-role-area").addClass("hidden");$("#add-role-area").hasClass("hidden")?$("#add-role-area").removeClass("hidden"):$("#add-role-area").addClass("hidden")});$("#edit-role").click(function(){$("#add-role-area").addClass("hidden");$("#edit-role-area").hasClass("hidden")?$("#edit-role-area").removeClass("hidden"):$("#edit-role-area").addClass("hidden")});$("#cancel-add-role-btn").click(function(){$("#edit-role-area").addClass("hidden");$("#add-role-area").addClass("hidden")});$("#cancel-edit-role-btn").click(function(){$("#edit-role-area").addClass("hidden");$("#add-role-area").addClass("hidden")});$("#collapse").on("click",function(){var n=$(this).data("state");n==="closed"?($(this).data("state","open"),$(".extension-row.collapsed").each(function(){$(this).removeClass("collapsed");$(this).data("aria-expanded","true");$(".row.collapse").each(function(){$(this).addClass("in")})})):($(this).data("state","closed"),$(".extension-row").each(function(){$(this).hasClass("collapsed")||($(this).addClass("collapsed"),$(this).data("aria-expanded","false"),$(".row.collapse").each(function(){$(this).removeClass("in")}))}))});$("#btnRight").click(function(n){var t=$("#availableExtensions option:selected");t.length===0&&(window.toastr.warning("You must select at least one extension from the list of available extensions.","No extension selected"),n.preventDefault());$("#selectedExtensions").append($(t).clone());$(t).remove();n.preventDefault()});$("#btnAllRight").click(function(n){var t=$("#availableExtensions option");t.length===0&&(window.toastr.warning("No extensions are available.","No extensions"),n.preventDefault());$("#selectedExtensions").append($(t).clone());$(t).remove();n.preventDefault()});$("#btnLeft").click(function(n){var t=$("#selectedExtensions option:selected");t.length===0&&(window.toastr.warning("You must select at least one extension from the list of selected extensions.","No extension selected"),n.preventDefault());$("#availableExtensions").append($(t).clone());$(t).remove();n.preventDefault()});$("#btnAllLeft").click(function(n){var t=$("#selectedExtensions option");t.length===0&&(window.toastr.warning("Selected extensions list is empty.","No extensions"),n.preventDefault());$("#availableExtensions").append($(t).clone());$(t).remove();n.preventDefault()});$("#acl-sel li").click(function(n){var t=$(n.currentTarget);t.closest(".bs-dropdown-to-select-acl-group").find('[data-bind="bs-drp-sel-acl-label"]').text($(this).text());$("input[name='acl-selected_value']").val($(this).attr("data-value"))});$("#profile_form :input").bind("keyup change paste",function(){input_changed("save_profile_btn")});$("#pwd_form :input").bind("keyup change paste",function(){input_changed("change_pwd-btn")});$("#inputAvatar").change(function(){$("#file_path").val($(this).val())});$("#role_name_input").change(function(){input_form_group_validator("#role_name_input")});$("#role_name_input").focusout(function(){input_form_group_validator("#role_name_input")});$("#save-add-role-btn").click(function(){var t=$("#role_name_input"),n,i;if(!t.val()){window.toastr.warning("No role name given.","Role not saved!");input_form_group_validator("#role_name_input");return}n=[];$("#selectedExtensions>option").each(function(){n.push(this.value)});i={RoleName:t.val(),Extensions:n,Permission:$("#newRolePermission").val()};$.ajax("/administration/savenewrole",{method:"POST",data:i}).done(function(n){window.toastr.success(n,"New role created");input_form_group_set_error("#role_name_input",null)}).fail(function(n,t){var i=n.responseText?n.responseText:t;input_form_group_set_error("#role_name_input",i)})});$("#save-edit-role-btn").click(function(){if(!$("#name").val()){window.toastr.warning("No new role name given.","Role not updated!");input_form_group_validator("#name");return}saveEditRole("edit-role-form")})});var Formatter=function(){function n(n,t){this.extension_name=" ";this.extension_admin=" ";this.extension_write=" ";this.extension_read=" ";this.roles_list={};this.id=n;var i=Object.keys(t)[0];this.roles_list[i]={};Object.assign(this.roles_list[i],t[i])}return n}(),extensionData={Security:{User:[0,1,2],Administrator:[0,1,2,4],Anonymous:[0]}},test=new Formatter(1,extensionData);console.log(JSON.stringify(test));
//# sourceMappingURL=security_user.min.js.map